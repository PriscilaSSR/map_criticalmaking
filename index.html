<!DOCTYPE html>
<html>
<head>
    <title>AI Power: The Evolution (2018-2026)</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { margin: 0; background: #050505; font-family: 'Inter', sans-serif; color: white; overflow: hidden; }
        #map { height: 100vh; width: 100vw; }
        
        .controls {
            position: absolute; top: 20px; left: 20px; z-index: 1000;
            background: rgba(15, 15, 15, 0.9); padding: 20px; border-radius: 12px;
            border: 1px solid #333; width: 260px; backdrop-filter: blur(10px);
        }

        .timeline-container {
            position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
            z-index: 1000; background: rgba(15, 15, 15, 0.9); padding: 20px 40px;
            border-radius: 50px; border: 1px solid #00f2ff; width: 60%;
            text-align: center; backdrop-filter: blur(10px);
        }

        input[type=range] { width: 100%; cursor: pointer; accent-color: #00f2ff; }
        .year-display { font-size: 24px; font-weight: 800; color: #00f2ff; margin-bottom: 5px; }
        
        .metric-btn {
            display: block; width: 100%; padding: 10px; margin: 5px 0;
            background: #111; border: 1px solid #333; color: #888;
            border-radius: 6px; cursor: pointer; font-size: 12px;
        }
        .metric-btn.active { border-color: #00f2ff; color: #fff; background: rgba(0, 242, 255, 0.1); }
    </style>
</head>
<body>

<div class="controls">
    <h2 style="font-size: 14px; color: #00f2ff; margin:0;">AI GLOBAL INDEX</h2>
    <p style="font-size: 11px; color: #666; margin-bottom: 15px;">Historical Data Analysis</p>
    
    <button class="metric-btn active" onclick="setMetric('investment')">Private Investment ($B)</button>
    <button class="metric-btn" onclick="setMetric('patents')">AI Patents (Cumulative)</button>
    
    <div style="font-size: 10px; color: #555; margin-top: 15px; border-top: 1px solid #222; padding-top: 10px;">
        Sources: Stanford HAI, WIPO, Tortoise AI Index.
    </div>
</div>

<div class="timeline-container">
    <div class="year-display" id="yearLabel">2024</div>
    <input type="range" id="yearSlider" min="2018" max="2026" value="2024" oninput="updateYear(this.value)">
    <div style="display: flex; justify-content: space-between; font-size: 12px; color: #666;">
        <span>2018</span><span>2020</span><span>2022</span><span>2024</span><span>2026</span>
    </div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    var map = L.map('map', { zoomControl: false, attributionControl: false }).setView([25, 10], 2);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);

    let currentYear = 2024;
    let currentMetric = 'investment';
    let layers = [];

    // Historical data estimates per year
    const data = {
        "Silicon Valley": {
            coords: [37.38, -122.08], color: "#00f2ff",
            investment: { 2018: 12, 2020: 18, 2022: 45, 2024: 67, 2026: 82 },
            patents: { 2018: 4000, 2020: 6500, 2022: 11000, 2024: 15400, 2026: 19000 }
        },
        "Beijing": {
            coords: [39.90, 116.40], color: "#ff3e3e",
            investment: { 2018: 8, 2020: 12, 2022: 15, 2024: 18, 2026: 22 },
            patents: { 2018: 5000, 2020: 12000, 2022: 22000, 2024: 32000, 2026: 41000 }
        }
    };

    function updateYear(year) {
        currentYear = year;
        document.getElementById('yearLabel').innerText = year;
        render();
    }

    function setMetric(m) {
        currentMetric = m;
        document.querySelectorAll('.metric-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
        render();
    }

    function render() {
        layers.forEach(l => map.removeLayer(l));
        layers = [];

        for (let city in data) {
            const hub = data[city];
            const val = hub[currentMetric][currentYear];
            
            // Scaling logic
            const radius = currentMetric === 'investment' ? val * 0.8 : Math.sqrt(val) / 4;

            const glow = L.circleMarker(hub.coords, {
                radius: radius, fillColor: hub.color, color: hub.color, weight: 1, fillOpacity: 0.2
            }).addTo(map);

            const core = L.circleMarker(hub.coords, {
                radius: 4, fillColor: "white", color: hub.color, weight: 2, fillOpacity: 1
            }).addTo(map);

            layers.push(glow, core);
        }
    }

    render();
</script>
</body>
</html>
